<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Working with REST APIs - Fuse Documentation</title>
    <link rel="stylesheet" href="https://fuse-open.github.io/docs/font-awesome.css?_v=20180514141219">
    <link rel="stylesheet" href="https://fuse-open.github.io/docs/bootstrap.css?_v=20180514141219">
    <link rel="stylesheet" href="https://fuse-open.github.io/docs/prism.css?_v=20180514141219">
    <link rel="stylesheet" href="https://fuse-open.github.io/docs/site.css?_v=20180514141219">
  </head>

  <body>

    <nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0">
      <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="https://fuse-open.github.io/docs/">Fuse: Documentation</a>
      <div class="search d-none d-lg-block">
        <script>
          (function() {
            var cx = '003990228577991558032:1dgsgv066lc';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
          })();
          window.onload = function() {
            document.getElementById('gsc-i-id1').placeholder = 'Search';
          }
        </script>
        <gcse:search></gcse:search>
      </div>
    </nav>

    <div class="container-fluid main-content-wrapper">
      <div class="row">
        <div class="col-12 col-lg-2 order-2 order-lg-1 bg-light sidebar">
          <div class="sidebar-sticky">
            <ul class="list-unstyled outline-nav outline-nav-level-0">
	<li>
		<a href="https://fuse-open.github.io/docs/index.html">Fuse</a>
	<ul class="list-unstyled outline-nav outline-nav-level-1">
		<li>
			<a href="https://fuse-open.github.io/docs/basics/basics.html">Fuse Basics</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuse-open.github.io/docs/basics/supported-platforms.html">Supported platforms</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/basics/installation-and-quickstart.html">Installation and quickstart</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/basics/introduction-to-fuse.html">Introduction to Fuse</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/basics/preview-and-export.html">Preview and export</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/componentization.html">Componentization</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/layout/responsive-layout.html">Responsive layout</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/declarative-animation.html">Declarative animation</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse-for-designers.html">Fuse for designers</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/structuring-app-resources.html">Structuring app resources</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/basics/feature-overview.html">Feature overview</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/basics/faq.html">FAQ</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/packages.html">Community Packages</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuse-open.github.io/docs/fuse-studio/fuse-studio.html">Fuse Studio</a>
		</li>
		<li>
			<a href="https://fuse-open.github.io/docs/tutorial/tutorial.html">Tutorial</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuse-open.github.io/docs/tutorial/edit-hike-view.html">1. Edit Hike view</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/tutorial/multiple-hikes.html">2. Multiple hikes</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/tutorial/splitting-up-components.html">3. Splitting up components</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/tutorial/navigation-and-routing.html">4. Navigation and routing</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/tutorial/mock-backend.html">5. Mocking our Backend</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/tutorial/look-and-feel.html">6. Tweaking the look/feel</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/tutorial/splash-screen.html">7. Splash screen</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/tutorial/final-thoughts.html">8. Final thoughts</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuse-open.github.io/docs/reference.html">Full Reference</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuse-open.github.io/docs/full-ux-class-reference.html">UX Class Reference</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/basics/uno-projects.html">Uno projects (.unoproj) Reference</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuse-open.github.io/docs/ux-markup/ux-markup.html">UX Markup</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuse-open.github.io/docs/ux-markup/literals.html">Literals</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/ux-markup/expressions.html">Expressions</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/ux-markup/names.html">Names (ux:Name)</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/ux-markup/classes.html">Classes (ux:Class)</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/ux-markup/dependencies.html">Dependencies (ux:Dependency)</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/ux-markup/properties.html">Properties (ux:Property)</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/ux-markup/resources.html">Resources (ux:Key)</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/ux-markup/globals.html">Globals (ux:Global)</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/ux-markup/templates.html">Templates (ux:Template)</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/ux-markup/binding-and-auto-bind.html">Binding (ux:Binding &amp; ux:AutoBind)</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/testing/testing.html">Testing (ux:Test)</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuse-open.github.io/docs/xcode-and-android-studio-integration/tutorial.html">XCode &amp; Android Studio Integration</a>
		</li>
		<li>
			<a href="https://fuse-open.github.io/docs/primitives/primitives.html">Primitives</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/text.html">Text</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/rectangle.html">Rectangle</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/circle.html">Circle</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/curve.html">Curve</a>
			<ul class="list-unstyled outline-nav outline-nav-level-3">
				<li>
					<a href="https://fuse-open.github.io/docs/fuse/controls/curvepoint.html">CurvePoint</a>
				</li>
			</ul>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/path.html">Path</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/image.html">Image</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/video.html">Video</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuse-open.github.io/docs/charting/charting.html">Charting</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/charting/plot.html">Plot</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/charting/dataseries.html">DataSeries</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/charting/plotaxis.html">PlotAxis</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/charting/plotdata.html">PlotData</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/charting/plotpoint.html">PlotPoint</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/charting/plotbar.html">PlotBar</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/charting/plotcurvepoint.html">PlotCurvePoint</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuse-open.github.io/docs/layout/layout.html">Layout</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/elements/element.html">Element</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/panel.html">Panel</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/stackpanel.html">StackPanel</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/dockpanel.html">DockPanel</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/grid.html">Grid</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/wrappanel.html">WrapPanel</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/layouts/columnlayout.html">ColumnLayout</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/layouts/circlelayout.html">CircleLayout</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/scrollview.html">ScrollView</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuse-open.github.io/docs/fuse/controls/control.html">Controls</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/button.html">Button</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/textinput.html">TextInput</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/textview.html">TextView</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/slider.html">Slider</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/switch.html">Switch</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/cameraviewbase.html">CameraView</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/mapview.html">MapView</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/webview.html">WebView</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/nativeviewhost.html">NativeViewHost</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/graphicsview.html">GraphicsView</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuse-open.github.io/docs/scripting/scripting.html">Scripting &amp; Data</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/reactive/javascript.html">JavaScript</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/scripting/debugging.html">Debugging</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/reactive/databinding.html">DataBinding</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/reactive/each.html">Each</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/reactive/with.html">With</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/reactive/match.html">Match</a>
			<ul class="list-unstyled outline-nav outline-nav-level-3">
				<li>
					<a href="https://fuse-open.github.io/docs/fuse/reactive/case.html">Case</a>
				</li>
			</ul>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuse-open.github.io/docs/fusejs/observable.html">Observables</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuse-open.github.io/docs/fusejs/observable-api.html">API reference</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fusejs/observable-patterns.html">Patterns</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuse-open.github.io/docs/navigation/navigation.html">Navigation</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/page.html">Page</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/pagecontrol.html">PageControl</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/navigation/router.html">Router</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/navigator.html">Navigator</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/triggers/transition.html">Transitions</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuse-open.github.io/docs/fusejs/fusejs.html">JavaScript APIs</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuse-open.github.io/docs/fusejs/polyfills.html">Polyfills</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fusejs/eventemitter.html">EventEmitter</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/filesystem/filesystemmodule.html">FileSystem</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/storage/storagemodule.html">Storage</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fusejs/bundle.html">Bundle</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fusejs/lifecycle.html">Lifecycle</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/reactive/fusejs/interapp.html">InterApp</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/share/sharemodule.html">Share</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fusejs/http.html">HTTP</a>
			<ul class="list-unstyled outline-nav outline-nav-level-3">
				<li>
					<a href="https://fuse-open.github.io/docs/backend/rest-apis.html">Working with REST APIs</a>
				</li>
			</ul>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fusejs/environment.html">Environment</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/reactive/fusejs/phone.html">Phone</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/camera/camera.html">Camera</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/cameraroll/cameraroll.html">CameraRoll</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/vibration/vibrationmodule.html">Vibration</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/geolocation/geolocation.html">GeoLocation</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/pushnotifications/push.html">Push notifications</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/localnotifications/localnotify.html">Local notifications</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fusejs/base64.html">Base64</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/reactive/fusejs/timermodule.html">Timer</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/imagetools/imagetools.html">ImageTools</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fusejs/third-party-modules.html">Third-party modules</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuse-open.github.io/docs/uno/ux/resource.html">Resources</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/font.html">Fonts</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/resources/imagesource.html">Image sources</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/assets/bundle.html">Bundled files</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/assets/sketch-import.html">Import from Sketch</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/assets/sketch-symbol-import.html">Sketch symbols (Beta)</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/assets/iconfont-import.html">Import icon fonts</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuse-open.github.io/docs/fuse/triggers/trigger.html">Triggers &amp; Animation</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/transform.html">Transforms</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/gestures/transformgesture.html">Gestures</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/animations/animator.html">Animators</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/triggers/timeline.html">Timeline</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/triggers/actions/triggeraction.html">Actions</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/selection/selection.html">Selection</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/triggers/stategroup.html">StateGroups</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/controls/multilayoutpanel.html">MultiLayoutPanel</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/triggers/busy.html">Busy</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuse-open.github.io/docs/effects/effects.html">Effects</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/effects/dropshadow.html">DropShadow</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/effects/blur.html">Blur</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/fuse/effects/halftone.html">Halftone</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuse-open.github.io/docs/native-interop/native-interop.html">Native interop (Uno)</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuse-open.github.io/docs/root-ns.html">Full Uno Class Reference</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/native-interop/native-ux-components.html">Native UX components</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/native-interop/native-js-modules.html">Native JS modules</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/native-interop/foreign-code.html">Foreign code</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/native-interop/using-third-party-sdks.html">Using 3rd party SDKs</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/unolibs/activity-utils.html">Activity utils</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/native-interop/facebook-login.html">Facebook login using foreign code</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/native-interop/gradle-support.html">Gradle Support</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/native-interop/build-settings.html">Build settings</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/native-interop/android-permissions.html">Android permissions</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/native-interop/android-start-activity.html">Starting an Android Activity</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/native-interop/ios-capabilities.html">iOS Capabilities</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuse-open.github.io/docs/alive/alive.html">Alive UX Kit</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuse-open.github.io/docs/alive.html">Components</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/alive/themes.html">Themes</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuse-open.github.io/docs/technical-corner/technical-corner.html">Technical corner</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuse-open.github.io/docs/technical-corner/fuse-protocol.html">Fuse plugin API</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/preview-and-export/preview-details.html">How preview works</a>
			</li>
			<li>
				<a href="https://fuse-open.github.io/docs/technical-corner/uxl-handbook.html">UXL handbook</a>
			</li>
		</ul>
		</li>
	</ul>
	</li>
</ul>

          </div>
        </div>
        <div role="main" class="col-12 col-lg-10 ml-sm-auto order-1 order-lg-2 px-4 main-content">
          <h1 id="working-with-rest-apis">Working with REST APIs</h1>
<p>Not all REST APIs provide a ready-to-use JavaScript wrapper.
Even when they do, it might rely on browser- or Node.js-specific features, meaning it won't work with Fuse straight out of the box.</p>
<p>This guide will take you through the general process of creating your own wrapper for a REST API.
Be aware that all APIs are different, and thus we can't give you a general recipe. This article is rather intended to give you an idea of how to approach this problem, and the code snippets should be thought of as a starting point for you to build on. Always read the documentation for your particular REST API carefully.</p>
<h2 id="getting-started">Getting started</h2>
<p>When working with a REST API, we will be doing a lot of HTTP requests to the same server with similar parameters.
Under the hood, we are going to use <code>fetch()</code> to make HTTP requests.
For this guide, we'll also assume that all responses from the API are encoded as JSON (although this might not always be the case).</p>
<p>To avoid duplicating too much code, we'll create a small layer of abstraction on top of <code>fetch()</code>.</p>
<pre><code class="language-js">var ROOT_URL = &quot;https://api.example.com/v2/&quot;;

function apiFetch(path, options) {
	var url = encodeURI(ROOT_URL + path);

	if(options === undefined) {
		options = {};
	}
	
	// If a body is provided, serialize it as JSON and set the Content-Type header
	if(options.body !== undefined) {
		options = Object.assign({}, options, {
			body: JSON.stringify(options.body),
			headers: Object.assign({}, options.headers, {
				&quot;Content-Type&quot;: &quot;application/json&quot;
			})
		});
	}
	
	// Fetch the resource and parse the response as JSON
	return fetch(url, options)
		.then(function(response) { return response.json(); });
}
</code></pre>
<p>This <code>apiFetch</code> function prepends the API's root URL and serializes the body as JSON (if one is provided), before sending off the request. It also attempts to parse the response as JSON upon completion.
Note that we are making somewhat heavy use of the <code>Object.assign()</code> function.
This is to avoid changing the properties of the <code>options</code> object that was passed in to the function – instead copying all the properties over to a new object and changing that.</p>
<p>Now that we have our tiny layer of abstraction in place, we can begin <em>using</em> that abstraction to implement the individual methods.
This is also a good time to talk about how REST APIs often are structured.</p>
<p>REST APIs usually expose collections of <em>resources</em>, where each resource can be referenced by a unique <em>id</em>.
Interacting with a resource is done by sending an HTTP request to the URL that represents the resource.
The <em>method</em> of the HTTP request determines which action to perform with the resource.</p>
<p>Let's consider an example.
Say we are dealing with an API for a blog which exposes a collection of articles.</p>
<p>Getting a list of articles is as simple as sending a GET request to <code>/articles</code>.</p>
<pre><code class="language-js">function getAllArticles() {
	return apiFetch(&quot;articles&quot;);
}
</code></pre>
<p>This should return something along the lines of the following:</p>
<pre><code class="language-json">[
	{ &quot;id&quot;: 1, &quot;title&quot;: &quot;Welcome to my new blog!&quot;, &quot;contents&quot;: &quot;...&quot; },
	{ &quot;id&quot;: 2, &quot;title&quot;: &quot;Why I've decided to quit blogging&quot;, &quot;contents&quot;: &quot;...&quot; }
]
</code></pre>
<blockquote>
<p>Note: More often than not, REST APIs will wrap the collection in an outer object to allow for error handling, pagination, and so forth.
However, for sake of simplicity, we'll assume the response is a simple array of items.</p>
</blockquote>
<p>To get the data associated with a specific blog post, we'll send a GET request to <code>/articles/&lt;ARTICLE_ID&gt;</code>.</p>
<pre><code class="language-js">function getArticle(id) {
	return apiFetch(&quot;articles/&quot; + id);
}
</code></pre>
<p>If we want to publish a new article, we issue a POST request to <code>/articles</code>, providing the JSON-encoded title and contents as the request body.</p>
<pre><code class="language-js">function publishArticle(title, contents) {
	return apiFetch(&quot;articles&quot;, {
		method: &quot;POST&quot;,
		body: {
			title: title,
			contents: contents
		}
	});
}
</code></pre>
<p>To <em>update</em> an already existing article, we issue a PATCH request to the URL representing that particular article:</p>
<pre><code class="language-js">function updateArticle(id, title, contents) {
	return apiFetch(&quot;articles/&quot; + id, {
		method: &quot;PATCH&quot;,
		body: {
			title: title,
			contents: contents
		}
	});
}
</code></pre>
<p>Query parameters are often used for more granular control over how results are returned.
For example, the <code>GET /articles</code> endpoint might allow an optional <code>search_query</code> parameter that, if set, will limit results to those containing a given piece of text.
When supplying query parameters, it's important to escape the value of each parameter using the <code>encodeURIComponent()</code> function.
Otherwise, if the query contains a character like <code>&amp;</code>, the server will interpret this as the start of the next query parameter, wreaking all kinds of havoc.</p>
<pre><code class="language-js">function search(query) {
	return apiFetch(&quot;articles?search_query=&quot; + encodeURIComponent(query));
}
</code></pre>
<p>Now let's export these functions, and place all the code inside its own module, which we'll call <code>api.js</code>:</p>
<pre><code class="language-js">module.exports = {
	getAllArticles: getAllArticles,
	getArticle: getArticle,
	publishArticle: publishArticle,
	updateArticle: updateArticle,
	search: search
};
</code></pre>
<p>We can then <code>require()</code> this module from elsewhere, and start using the actual API:</p>
<pre><code class="language-js">var Observable = require(&quot;FuseJS/Observable&quot;);
var API = require(&quot;api&quot;);

var articles = Observable();

function refreshArticles() {
	API.getAllArticles().then(function(newArticles) {
		articles.replaceAll(newArticles);
	});
}

refreshArticles();

module.exports = {
	articles: articles,
	refreshArticles: refreshArticles
}
</code></pre>
<h2 id="oauth2">OAuth2</h2>
<p>If the API you are using deals with user accounts, they are very likely to be using <a href="https://oauth.net/">OAuth2</a>.
This is <em>not</em> intended to be a complete guide on OAuth2, as there are already a number of <a href="https://aaronparecki.com/2012/07/29/2/oauth2-simplified">great articles on the subject</a>.
Instead, this part of the article will focus on integrating OAuth2 with Fuse.</p>
<p>In essence, OAuth2 is a protocol that allows users to authorize access to a service without having to send the user's username and password across the internet.</p>
<p>APIs using OAuth2 will require you to register your application before using them.
This process will vary between each provider, but you typically provide some basic metadata about your app, such as a title, description, etc.</p>
<p>When your app has been registered, you will receive a <em>client ID</em> (sometimes referred to as <em>API Key</em> or <em>application ID</em>), plus a <em>client secret</em>.
The API uses the <em>client ID</em> to uniquely identify your application, and must generally be included with every request.
The <em>client secret</em> is used to verify that applications accessing the API are who they say they are.</p>
<p>To support a variety of use-cases, OAuth2 supports a number of <em>grant types</em>.
There are essentially two grants that work well with mobile applications: the <em>implicit</em> grant, and the <em>authorization code</em> grant.</p>
<p>While the <em>authorization code</em> grant is considered best practice, it is outside the scope of this article as it requires you to have a backend server running for it to be secure.
You can read up on it <a href="https://aaronparecki.com/oauth-2-simplified/#mobile-apps">here</a>.</p>
<p>Instead, this article will focus on the <em>implicit</em> grant, which does not require a server, but only issues single-use sessions that expire rather quickly.
The reason is that, unlike the other grants, <em>implicit grant does not require the client to know the client secret</em>.
If we were to distribute the client secret with the app, an attacker could easily extract it from the application bundle.
If you want your users to stay logged in, we recommend provisioning a server to use with the <em>authorization code</em> grant.</p>
<p>The <em>implicit</em> grant works by redirecting the user to a page hosted by the API, asking them to authenticate and grant a certain set of permissions (hereby referred to as <em>scopes</em>) to your app.
If they accept, they are redirected back to your app through a custom <a href="../basics/uno-projects.html#mobile-urischeme">URI scheme</a>.
When redirected back, a <a href="https://en.wikipedia.org/wiki/Fragment_identifier">fragment identifier</a> is appended to the <em>redirect URI</em>.
This fragment identifier contains, <a href="https://tools.ietf.org/html/rfc6749#section-4.2.2">among other things</a>, an <em>access token</em> which your app uses to make requests on the user's behalf.</p>
<p>Let's consider an example.</p>
<p>We'll register <code>my-app</code> as the <a href="../basics/uno-projects.html#mobile-urischeme">URI scheme</a> in our Uno project file (<code>.unoproj</code>).
This will make our app launch when an URI starting in <code>my-app:</code> is launched.</p>
<pre><code>{
	&quot;Mobile&quot;: {
		&quot;UriScheme&quot;: &quot;my-app&quot;
	}
}
</code></pre>
<p>Our <em>redirect URI</em> can for example be <code>my-app:oauth-callback</code> (although you can use anything in place of <code>oauth-callback</code> as long as it's consistent).</p>
<p>When using the <em>implicit</em> grant, we don't have the client secret to verify that our app is who it says it is.
Thus, we need to register this <em>redirect URI</em> with the API provider, so that an attacker can't request a redirect to <em>any</em> URI, potentially sending the user's token to a malicious application.
Registering the <em>redirect URI</em> is generally done in the same place where you initially registered your app.</p>
<p>Now, when the user wishes to log in, we'll use the <a href="../fuse/reactive/fusejs/interapp.html">InterApp module</a> to open the authentication dialog system browser.</p>
<p>As we can see in the snippet below, we're also sending some query parameters when opening the authentication dialog.
Let's quickly go through what they mean:</p>
<ul>
<li><code>redirect_uri</code> – The original <em>redirect URI</em>, should exactly match what was registered with the API provider.</li>
<li><code>client_id</code> – The <em>client ID</em> you received after registering your app with the API provider.</li>
<li><code>scope</code> – The list of <em>scopes</em> (permissions) you are requesting access to from the user. Look for available scopes in the API's documentation.</li>
<li><code>response_type</code> – Must be <code>token</code> for <em>implicit</em> grant, <code>code</code> for <em>authorization code</em> grant.</li>
</ul>
<pre><code class="language-js">
var InterApp = require(&quot;FuseJS/InterApp&quot;);

var REDIRECT_URI = &quot;my-app:oauth-callback&quot;;
var CLIENT_ID = &quot;YOUR_CLIENT_ID_GOES_HERE&quot;;

// Launches the authentication dialog in the system browser
function authenticate() {
	var authUri = &quot;https://auth.example.com/auth_dialog&quot;
		+ &quot;?redirect_uri=&quot; + encodeURIComponent(REDIRECT_URI)
		+ &quot;&amp;client_id=&quot; + encodeURIComponent(CLIENT_ID)
		+ &quot;&amp;scope=email&quot;
		+ &quot;&amp;response_type=token&quot;;

	InterApp.launchUri(authUri);
}
</code></pre>
<p>When the user has successfully authorized, the fragment identifier containing the access token is appended to the original <em>redirect URI</em>, and the user is redirected there.
In the case of this example, it will look something like the following:</p>
<pre><code>my-app:oauth-callback#access_token=0123456789abcdef&amp;token_type=bearer
</code></pre>
<p>Let's break this down a bit:</p>
<p><img src="../media/oauth-redirect-uri-breakdown.png" alt="Redirect URI breakdown"></p>
<p>The <em>Original Redirect URI</em> in the illustration above should match the one you registered with the API provider.
The <em>Fragment Identifier</em> is appended by the API provider, and contains the access token.</p>
<p>The <a href="../fuse/reactive/fusejs/interapp.html">InterApp module</a> allows us to register a function that will be called upon launching the app through its URI Scheme.
Inside this function, we parse the URL's <em>fragment identifier</em>, and extract the access token.</p>
<pre><code class="language-js">function parseUriFragment(uri) {
	var uriAndFragment = uri.split(&quot;#&quot;);

	if(uriAndFragment.length &lt; 2) {
		return {};
	}
	var fragment = uriAndFragment[uriAndFragment.length - 1];

	var query = {};
	fragment.split(&quot;&amp;&quot;).forEach(function(pairString) {
		var parts = pairString.split(&quot;=&quot;);
		var key = decodeURIComponent(parts[0]);
		var value = (parts.length &gt; 1) ? decodeURIComponent(parts[1]) : &quot;&quot;;	
		query[key] = value;
	});
	return query;
}

// Specifies a function to handle the redirect after the user has successfully authenticated
InterApp.on('receivedUri', function(uri) {
	if(uri.indexOf(REDIRECT_URI) !== 0) {
		return;
	}

	var query = parseUriFragment(uri);
	var accessToken = query.access_token;
	
	//
	// Here, save the access token and use it for further requests.
	//
});
</code></pre>
<p>That's it! we now have all we need to begin making authenticated requests to the API.
How to actually send an authenticated request will vary between APIs, but should be clear from reading the docs for the API in question.</p>

        </div>
      </div>
    </div>

    <script type="text/javascript" src="https://fuse-open.github.io/docs/jquery.js?_v=20180514141219"></script>
    <script type="text/javascript" src="https://fuse-open.github.io/docs/popper.js?_v=20180514141219"></script>
    <script type="text/javascript" src="https://fuse-open.github.io/docs/bootstrap.js?_v=20180514141219"></script>
    <script type="text/javascript" src="https://fuse-open.github.io/docs/prism.js?_v=20180514141219"></script>
    <script type="text/javascript" src="https://fuse-open.github.io/docs/site.js?_v=20180514141219"></script>
  </body>
</html>
