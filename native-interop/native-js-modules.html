<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Creating native JavaScript Modules in Uno - Fuse Documentation</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fuseopen.com/docs/prism.css">
    <link rel="stylesheet" href="https://fuseopen.com/docs/site.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  </head>

  <body>

    <nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap">
      <a class="navbar-brand" href="https://fuseopen.com/docs/">Fuse Open Documentation</a>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <div class="col-12 col-md-3 col-xl-2 order-2 order-md-1 bg-light sidebar">
          <form id="search">
            <input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
          </form>

          <ul class="list-unstyled outline-nav outline-nav-level-0">
	<li>
		<a href="https://fuseopen.com/docs/index.html">Fuse</a>
	<ul class="list-unstyled outline-nav outline-nav-level-1">
		<li>
			<a href="https://fuseopen.com/docs/basics/basics.html">Fuse Basics</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuseopen.com/docs/basics/supported-platforms.html">Supported platforms</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/basics/installation-and-quickstart.html">Installation and quickstart</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/basics/introduction-to-fuse.html">Introduction to Fuse</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/basics/preview-and-export.html">Preview and export</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/componentization.html">Componentization</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/layout/responsive-layout.html">Responsive layout</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/declarative-animation.html">Declarative animation</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse-for-designers.html">Fuse for designers</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/structuring-app-resources.html">Structuring app resources</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/basics/feature-overview.html">Feature overview</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/basics/faq.html">FAQ</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/packages.html">Community Packages</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/tutorial-models/tutorial.html">Tutorial (Using Models API)</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuseopen.com/docs/tutorial-models/edit-hike-view.html">1. Edit Hike view</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/tutorial-models/multiple-hikes.html">2. Multiple hikes</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/tutorial-models/splitting-up-components.html">3. Splitting up components</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/tutorial-models/navigation-and-routing.html">4. Navigation and routing</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/tutorial-models/mock-backend.html">5. Mocking our Backend</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/tutorial-models/look-and-feel.html">6. Tweaking the look/feel</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/tutorial-models/splash-screen.html">7. Splash screen</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/tutorial-models/final-thoughts.html">8. Final thoughts</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/tutorial/tutorial.html">Tutorial (Using Observables API)</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuseopen.com/docs/tutorial/edit-hike-view.html">1. Edit Hike view</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/tutorial/multiple-hikes.html">2. Multiple hikes</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/tutorial/splitting-up-components.html">3. Splitting up components</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/tutorial/navigation-and-routing.html">4. Navigation and routing</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/tutorial/mock-backend.html">5. Mocking our Backend</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/tutorial/look-and-feel.html">6. Tweaking the look/feel</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/tutorial/splash-screen.html">7. Splash screen</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/tutorial/final-thoughts.html">8. Final thoughts</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/fuse-studio/fuse-studio.html">Fuse Studio</a>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/basics/uno-projects.html">Project Reference (.unoproj)</a>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/uno/ux/resource.html">Resources</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuseopen.com/docs/fuse/font.html">Fonts</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/resources/imagesource.html">Image sources</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/assets/bundle.html">Bundled files</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/assets/sketch-import.html">Import from Sketch</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/assets/sketch-symbol-import.html">Sketch symbols (Beta)</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/assets/iconfont-import.html">Import icon fonts</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/fusejs-beta/fusejs.html">Models API (New)</a>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/fusejs/observable.html">Observables API</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuseopen.com/docs/fusejs/observable-api.html">Full API reference</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fusejs/observable-patterns.html">Patterns</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/fusejs/fusejs.html">FuseJS (JavaScript) APIs</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuseopen.com/docs/fusejs/polyfills.html">Polyfills</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fusejs/eventemitter.html">EventEmitter</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/filesystem/filesystemmodule.html">FileSystem</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/storage/storagemodule.html">Storage</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fusejs/bundle.html">Bundle</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fusejs/lifecycle.html">Lifecycle</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/reactive/fusejs/interapp.html">InterApp</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/share/sharemodule.html">Share</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fusejs/http.html">HTTP</a>
			<ul class="list-unstyled outline-nav outline-nav-level-3">
				<li>
					<a href="https://fuseopen.com/docs/backend/rest-apis.html">Working with REST APIs</a>
				</li>
			</ul>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fusejs/environment.html">Environment</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/reactive/fusejs/phone.html">Phone</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/camera/camera.html">Camera</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/cameraroll/cameraroll.html">CameraRoll</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/vibration/vibrationmodule.html">Vibration</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/geolocation/geolocation.html">GeoLocation</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/pushnotifications/push.html">Push notifications</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/localnotifications/localnotify.html">Local notifications</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/sensor/sensormodule.html">Sensors</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fusejs/base64.html">Base64</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/reactive/fusejs/timermodule.html">Timer</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/imagetools/imagetools.html">ImageTools</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fusejs/third-party-modules.html">Third-party modules</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/scripting/scripting.html">Scripting &amp; Data</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuseopen.com/docs/fuse/reactive/javascript.html">JavaScript</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/scripting/debugging.html">Debugging</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/reactive/databinding.html">DataBinding</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/reactive/each.html">Each</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/reactive/with.html">With</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/reactive/match.html">Match</a>
			<ul class="list-unstyled outline-nav outline-nav-level-3">
				<li>
					<a href="https://fuseopen.com/docs/fuse/reactive/case.html">Case</a>
				</li>
			</ul>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/ux-markup/ux-markup.html">UX Markup</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuseopen.com/docs/ux-markup/literals.html">Literals</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/ux-markup/expressions.html">Expressions</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/ux-markup/names.html">Names (ux:Name)</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/ux-markup/classes.html">Classes (ux:Class)</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/ux-markup/dependencies.html">Dependencies (ux:Dependency)</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/ux-markup/properties.html">Properties (ux:Property)</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/ux-markup/resources.html">Resources (ux:Key)</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/ux-markup/globals.html">Globals (ux:Global)</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/ux-markup/templates.html">Templates (ux:Template)</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/ux-markup/binding-and-auto-bind.html">Binding (ux:Binding &amp; ux:AutoBind)</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/testing/testing.html">Testing (ux:Test)</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/full-ux-class-reference.html">Full UX Class Reference</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/primitives/primitives.html">Primitives</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/text.html">Text</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/rectangle.html">Rectangle</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/circle.html">Circle</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/curve.html">Curve</a>
			<ul class="list-unstyled outline-nav outline-nav-level-3">
				<li>
					<a href="https://fuseopen.com/docs/fuse/controls/curvepoint.html">CurvePoint</a>
				</li>
			</ul>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/path.html">Path</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/image.html">Image</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/video.html">Video</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/playsound.html">Sound</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/layout/layout.html">Layout</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuseopen.com/docs/fuse/elements/element.html">Element</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/panel.html">Panel</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/stackpanel.html">StackPanel</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/dockpanel.html">DockPanel</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/grid.html">Grid</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/wrappanel.html">WrapPanel</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/layouts/columnlayout.html">ColumnLayout</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/layouts/circlelayout.html">CircleLayout</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/scrollview.html">ScrollView</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/navigation/navigation.html">Navigation</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/page.html">Page</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/pagecontrol.html">PageControl</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/navigation/router.html">Router</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/navigator.html">Navigator</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/triggers/transition.html">Transitions</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/fuse/controls/control.html">Controls</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/button.html">Button</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/textinput.html">TextInput</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/textview.html">TextView</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/slider.html">Slider</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/switch.html">Switch</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/cameraviewbase.html">CameraView</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/mapview.html">MapView</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/webview.html">WebView</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/nativeviewhost.html">NativeViewHost</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/graphicsview.html">GraphicsView</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/fuse/triggers/trigger.html">Triggers &amp; Animation</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuseopen.com/docs/fuse/transform.html">Transforms</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/gestures/transformgesture.html">Gestures</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/animations/animator.html">Animators</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/triggers/timeline.html">Timeline</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/triggers/actions/triggeraction.html">Actions</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/selection/selection.html">Selection</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/triggers/stategroup.html">StateGroups</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/controls/multilayoutpanel.html">MultiLayoutPanel</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/triggers/busy.html">Busy</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/charting/charting.html">Charting</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuseopen.com/docs/fuse/charting/plot.html">Plot</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/charting/dataseries.html">DataSeries</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/charting/plotaxis.html">PlotAxis</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/charting/plotdata.html">PlotData</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/charting/plotpoint.html">PlotPoint</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/charting/plotbar.html">PlotBar</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/charting/plotcurvepoint.html">PlotCurvePoint</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/alive/alive.html">Alive UX Kit</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuseopen.com/docs/alive.html">Components</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/alive/themes.html">Themes</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/effects/effects.html">Effects</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuseopen.com/docs/fuse/effects/dropshadow.html">DropShadow</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/effects/blur.html">Blur</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/fuse/effects/halftone.html">Halftone</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/xcode-and-android-studio-integration/tutorial.html">Fuse Views</a>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/native-interop/native-interop.html">Native interop (Uno)</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuseopen.com/docs/root-ns.html">Full Uno Class Reference</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/native-interop/native-ux-components.html">Native UX components</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/native-interop/native-js-modules.html">Native JS modules</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/native-interop/foreign-code.html">Foreign code</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/native-interop/using-third-party-sdks.html">Using 3rd party SDKs</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/unolibs/activity-utils.html">Activity utils</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/native-interop/facebook-login.html">Facebook login using foreign code</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/native-interop/gradle-support.html">Gradle Support</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/native-interop/build-settings.html">Build settings</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/native-interop/android-permissions.html">Android permissions</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/native-interop/android-start-activity.html">Starting an Android Activity</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/native-interop/ios-capabilities.html">iOS Capabilities</a>
			</li>
		</ul>
		</li>
		<li>
			<a href="https://fuseopen.com/docs/technical-corner/technical-corner.html">Technical corner</a>
		<ul class="list-unstyled outline-nav outline-nav-level-2">
			<li>
				<a href="https://fuseopen.com/docs/technical-corner/fuse-protocol.html">Fuse plugin API</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/preview-and-export/preview-details.html">How preview works</a>
			</li>
			<li>
				<a href="https://fuseopen.com/docs/technical-corner/uxl-handbook.html">UXL handbook</a>
			</li>
		</ul>
		</li>
	</ul>
	</li>
</ul>

        </div>
        <div role="main" class="col-12 col-md-9 col-xl-10 order-1 order-md-2 px-4 main-content">
          <h1 id="creating-native-javascript-modules-in-uno">Creating native JavaScript Modules in Uno</h1>
<p><code>Fuse.Reactive.JavaScript</code> allows you to define native code modules in Uno and use them
from JavaScript. This is how all native modules (like Camera, Vibrate etc.) in FuseJS
are implemented.</p>
<p>A module is a JavaScript object that can be acquired through the <code>require</code> function.</p>
<h2 id="defining-a-native-module">Defining a native module</h2>
<p>To define a native module, you create an instance of <code>Fuse.Scripting.NativeModule</code>. Remember to also add a reference to <em>Fuse.Scripting</em> in your .unoproj-file if it isn't already added.</p>
<p>To the constructor we can pass a list of members. We can also add additional members in the
constructor through the <code>AddMember()</code> method.</p>
<p>Currently, two types of members are supported:</p>
<ul>
<li><code>NativeFunction</code> - wraps an Uno delegate as a JavaScript function</li>
<li><code>NativePromise</code> - wraps an Uno <code>Promise&lt;T&gt;</code> as an EcmaScript 6 style <code>Promise</code></li>
</ul>
<blockquote>
<p>Note: For the time being, exposing native modules to JavaScript is a bit hacky. You need to mark your class with the <code>[UXGlobalModule]</code> attribute, make it a singleton with a public constructor, and expose it as a global resource using <code>Resource.SetGlobalKey()</code>. We are working on a prettier way to solve this.</p>
</blockquote>
<p>Here is a simple example, exposing a custom logging function:</p>
<pre><code class="language-csharp">	using Fuse;
	using Fuse.Scripting;
	using Uno.UX;

	[UXGlobalModule]
	public class MyLogModule : NativeModule
	{
		static readonly MyLogModule _instance;
		
		public MyLogModule()
		{
			// Make sure we're only initializing the module once
			if (_instance != null) return;

			_instance = this;
			Resource.SetGlobalKey(_instance, &quot;MyLogModule&quot;);
			AddMember(new NativeFunction(&quot;Log&quot;, (NativeCallback)Log));
		}

		static object Log(Context c, object[] args)
		{
			foreach (var arg in args)
				debug_log arg;

			return null;
		}
	}
</code></pre>
<p>We can then use your native module from JavaScript, as shown below.</p>
<pre><code class="language-xml">	&lt;App&gt;
		&lt;Panel&gt;
			&lt;JavaScript&gt;
				var LogModule = require(&quot;MyLogModule&quot;);

				LogModule.Log(&quot;Hello from JavaScript!&quot;);
			&lt;/JavaScript&gt;
		&lt;/Panel&gt;
	&lt;/App&gt;
</code></pre>
<h2 id="nativefunction">NativeFunction</h2>
<p>Native functions are defined by providing a <code>Fuse.Scripting.NativeCallback</code> delegate, which
has the following signature:</p>
<pre><code class="language-csharp">	public delegate object NativeCallback(Context c, object[] args);
</code></pre>
<p>Where <code>args</code> is a list of JavaScript arguments passed to the function. An argument can be
of one of the following types, depending on what is passed to the function at runtime:</p>
<ul>
<li>
<p>A number of type <code>double</code> or <code>int</code> if the argument is a JavaScript number.
We can the use <a href="../fuse/marshal.html"><code>Fuse.Scripting.Marshal</code></a> class to correctly marshal to a specific desired value, e.g.</p>
<p>  <code>var number = Marshal.ToInt(args[0]);</code></p>
</li>
<li>
<p>A <code>bool</code> if the argument is a JavaScript bool.</p>
</li>
<li>
<p>A <code>string</code> if the argument is a JavaScript string.</p>
</li>
<li>
<p>A <a href="../fuse/scripting/array.html"><code>Fuse.Scripting.Array</code></a>, if the argument is a JavaScript array.</p>
</li>
<li>
<p>A <a href="../fuse/scripting/function.html"><code>Fuse.Scripting.Function</code></a>, if the argument is a JavaScript function.</p>
</li>
<li>
<p>A <a href="../fuse/scripting/object.html"><code>Fuse.Scripting.Object</code></a>, if the argument is a JavaScript object other than an array or function.</p>
</li>
<li>
<p>A <a href="../fuse/scripting/external.html"><code>Fuse.Scripting.External</code></a>, if the argument is a boxed Uno object.</p>
</li>
<li>
<p><code>null</code> if the JavaScript object is <code>null</code> or <code>undefined</code>.</p>
</li>
</ul>
<p>The return value for your callback follows the same rules, and additionally allows <a href="../fuse/scripting/callback.html"><code>Fuse.Scripting.Callback</code>s</a> for Uno callbacks that should be marshalled as JS functions.
If you return <code>null</code>, the corresponding JS function will return <code>null</code>.</p>
<h2 id="native-eventemitter-modules">Native EventEmitter modules</h2>
<p>We can automatically make our <code>NativeModule</code>s instances of the JavaScript class
<a href="../fusejs/eventemitter.html">EventEmitter</a> by using a <a href="../fuse/scripting/nativeeventemittermodule.html">NativeEventEmitterModule</a>, which is a
subclass of <code>NativeModule</code>. <code>EventEmitter</code>s allow emitting and listening to
named events, and <a href="../fuse/scripting/nativeeventemittermodule.html">NativeEventEmitterModule</a>s in turn allow emitting such
events from Uno.</p>
<p>The following example illustrates how to create a <a href="../fuse/scripting/nativeeventemittermodule.html">NativeEventEmitterModule</a>
that uses an event to echo any message sent to it using a <code>send</code> function:</p>
<pre><code class="language-csharp">	using Fuse;
	using Fuse.Scripting;
	using Uno.UX;

	[UXGlobalModule]
	public class Chat : NativeEventEmitterModule
	{
		static readonly Chat _instance;

		public Chat()
			: base(true, &quot;messageReceived&quot;)
		{
			if (_instance != null) return;

			_instance = this;
			Resource.SetGlobalKey(_instance, &quot;Chat&quot;);

			AddMember(new NativeFunction(&quot;send&quot;, (NativeCallback)SendMessage));
		}

		object[] SendMessage(Fuse.Scripting.Context context, object[] args)
		{
			var arg = args.Length &gt; 0 ? args[0] as string : null;

			if (arg == null)
				Emit(&quot;messageReceived&quot;, &quot;----&quot;);
			else
				Emit(&quot;messageReceived&quot;, arg);

			return null;
		}
	}
</code></pre>
<p>Note that we have to explicitly call the base class constructor when creating a
<a href="../fuse/scripting/nativeeventemittermodule.html">NativeEventEmitterModule</a>. The first argument is a bool that determines
whether any events that happen before the app has been fully initialized should
be cached and replayed. Any other arguments are the allowed event names. In
this case we only have one event called <code>&quot;messageReceived&quot;</code>.</p>
<p>We call <code>Emit(&quot;messageReceived&quot;, arg)</code> to pass <code>arg</code> to any listeners that
listen to the <code>&quot;messageReceived&quot;</code> event on the JavaScript side.</p>
<p>The <code>chat</code> module can then be used from JavaScript like so:</p>
<pre><code class="language-js">	var chat = require(&quot;Chat&quot;);

	function send() {
	    chat.send(new Date().toString());
	}

	chat.on(&quot;messageReceived&quot;, function(message) {
	    console.log(&quot;Message received &quot; + message);
	});
</code></pre>
<p>See the documentation of <a href="../fusejs/eventemitter.html">EventEmitter</a> for more information.</p>
<h2 id="nativepromise">NativePromise</h2>
<p>Promises are objects that represent objects that may become available in the future, and can either succeed
or fail in retrieving that object. Examples are results of HTTP requests, dialog boxes or taking pictures
with the camera.</p>
<p>Native modules support wrapping Uno promises in JS promises automatically, through the <code>NativePromise</code> class.</p>
<p>The syntax is:</p>
<pre><code class="language-csharp">	new NativePromise&lt;TUno, TJavaScript&gt;(name, futureFactory [, converter])
</code></pre>
<p>or</p>
<pre><code class="language-csharp">	new NativePromise&lt;TUno, TJavaScript&gt;(name, resultFactory [, converter])
</code></pre>
<p>Where:</p>
<ul>
<li>
<p><code>TUno</code> is the type the promise produces in Uno</p>
</li>
<li>
<p><code>TJavaScript</code> is the type the promise produces in JavaScript. If <code>converter</code> is omitted, TUno and TJavaScript must be the same type (string, numeric or boolean).</p>
</li>
<li>
<p><code>name</code> is the name of the member in the module</p>
</li>
<li>
<p><code>futureFactory</code> is a delegate that produces a <code>Future&lt;TUno&gt;</code> from an <code>object[]</code>, which is the set of arguments
passed in from JavaScript (following the same convention as arguments to <code>NativeFunction</code>). Signature:</p>
<p><code>public delegate Future&lt;TUno&gt; FutureFactory(object[] args);</code></p>
</li>
<li>
<p><code>resultFactory</code> is a delegate that produces a <code>TUno</code> from an <code>object[]</code>.</p>
<p>  <code>public delegate TUno ResultFactory(object[] args);</code></p>
</li>
<li>
<p><code>converter</code> (optional) is a method that converts <code>TUno</code> to <code>TJavaScript</code> given a <code>Fuse.Scripting.Context</code>. Signature:</p>
<p><code>public delegate TJavaScript Converter(Context c, TUno value);</code></p>
</li>
</ul>
<p>The first version wraps an existing <code>Future&lt;TUno&gt;</code>, and optionally converts it to a corresponding JavaScript type.</p>
<p>The second version wraps a simple function that produces <code>TUno</code>. This function will be executed in a separate thread
automatically, and the result will be dispatched back to the JavaScript thread when done. This offers a simpler way
of implementing simple promises. To reject the promise, throw an <code>Exception</code> from the resultFactory.</p>
<p>Note that <code>Future&lt;T&gt;</code> and <code>Promise&lt;T&gt;</code> are Uno types currently defined in the <code>Experimental.Threading</code> package.</p>
<p>Below is an example of a very simple NativePromise module</p>
<pre><code class="language-csharp">	using Fuse;
	using Fuse.Scripting;
	using Uno.UX;
	using Uno;

	[UXGlobalModule]
	public class PromiseExample : NativeModule
	{
		static readonly PromiseExample _instance;

		public PromiseExample()
		{
			if (_instance != null) return;
			
			_instance = this;
			Resource.SetGlobalKey(_instance, &quot;PromiseExample&quot;);
			
			AddMember(new NativePromise&lt;string, Fuse.Scripting.Object&gt;(&quot;promiseMe&quot;, PromiseMe, Converter));
		}
		
		static string PromiseMe(object[] args)
		{
			if (args.Length != 1)
			{
				// This will reject the promise with the message of the exception
				throw new Exception(&quot;promiseMe() requires exactly 1 parameter.&quot;);
			}
			
			// This will resolve the promise
			return args[0] as string;
		}

		static Fuse.Scripting.Object Converter(Context context, string str)
		{
			var wrapperObject = context.NewObject();
			wrapperObject[&quot;foo&quot;] = str;
			return wrapperObject;
		}
	}
</code></pre>
<p>We can use the above code in JavaScript like so:</p>
<pre><code class="language-js">	var PromiseExample = require(&quot;PromiseExample&quot;);
	PromiseExample.promiseMe(&quot;bar&quot;)
		.then(function(result) {
			console.dir(result);
			// { foo: &quot;bar&quot; }
		});

	PromiseExample.promiseMe()
		.then(function() {
			// This will never happen
		}, function(err) {
			console.log(&quot;Error: &quot; + err);
			// Error: promiseMe() requires exactly 1 parameter.
		})
</code></pre>
<h2 id="nativeevent">NativeEvent</h2>
<p>Note: The recommended way to do native events is to use a <a href="../fuse/scripting/nativeeventemittermodule.html">NativeEventEmitterModule</a>, described above. <code>NativeEvent</code>s are an older feature that is being phased out.</p>
<p>Native events can be used to call back to JavaScript from Uno code. This is done by adding a <code>NativeEvent</code> to the <code>NativeModule</code>.
The <code>NativeEvent</code> can then be called using <code>yourNativeEvent.RaiseAsync(args)</code>.</p>
<p>The following example illustrates how you create a <code>NativeModule</code> that echoes any message sent to it using a <code>send</code> function and an <code>onMessageReceived</code> event.</p>
<pre><code class="language-csharp">	using Fuse;
	using Fuse.Scripting;
	using Uno.UX;

	[UXGlobalModule]
	public class Chat : NativeModule
	{
		static readonly Chat _instance;

		NativeEvent _nativeEvent;

		public Chat()
		{
			if (_instance != null) return;

			_instance = this;
			Resource.SetGlobalKey(_instance, &quot;Chat&quot;);

			AddMember(new NativeFunction(&quot;send&quot;, (NativeCallback)SendMessage));
			_nativeEvent = new NativeEvent(&quot;onMessageReceived&quot;);
			AddMember(_nativeEvent);
		}

		object SendMessage(Fuse.Scripting.Context context, object[] args)
		{
			var arg = args[0] as string;
			if (arg != null)
				_nativeEvent.RaiseAsync(arg);
			else
				_nativeEvent.RaiseAsync(&quot;----&quot;);

			return null;
		}
	}
</code></pre>
<p>The <code>chat</code> module can then be used from JavaScript like so:</p>
<pre><code class="language-js">	var chat = require(&quot;Chat&quot;);

	function send() {
	    chat.send(new Date().toString());
	}

	chat.onMessageReceived = function(message) {
	    console.log(&quot;onMessageReceived &quot; + message);
	};
</code></pre>

        </div>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://fuseopen.com/docs/prism.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script type="text/javascript" src="https://fuseopen.com/docs/site.js"></script>
  </body>
</html>
